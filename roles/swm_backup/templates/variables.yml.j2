---
# ALPACA Operator Variables
# Generated from CSV: {{ csv_processor.input_file }}
# Environment: {{ processing_options.environment }}

# CSV Processing Configuration
csv_processor:
  input_file: "{{ csv_source_file }}"
  output_dir: "{{ playbook_dir }}/output"
  delimiter: "{{ csv_delimiter }}"
  encoding: "{{ csv_encoding }}"
  skip_header: true
  column_mapping:
    system_name: "SystemName"
    agent_name: "AgentName"
    command_name: "CommandName"
    sla_level: "SLA"
    parameters: "Parameters"
    schedule: "Schedule"
    enabled: "Enabled"
    critical: "Critical"

# SLA Definitions
sla_definitions:
{% for sla_level, sla_config in sla_definitions.items() %}
  "{{ sla_level }}":
    name: "{{ sla_config.name }}"
    description: "{{ sla_config.description }}"
    retention:
      local_file_ret: {{ sla_config.retention.local_file_ret }}
      local_snap_ret: {{ sla_config.retention.local_snap_ret }}
      local_log_ret: {{ sla_config.retention.local_log_ret }}
      blob_log_ret: {{ sla_config.retention.blob_log_ret }}
      blob_file_ret: {{ sla_config.retention.blob_file_ret }}
      blob_file_ret_monthly: {{ sla_config.retention.blob_file_ret_monthly }}
      blob_file_ret_yearly: {{ sla_config.retention.blob_file_ret_yearly }}
    timeout:
      type: "{{ sla_config.timeout.type }}"
      value: {{ sla_config.timeout.value }}
    escalation:
      mail_enabled: {{ sla_config.escalation.mail_enabled | lower }}
      sms_enabled: {{ sla_config.escalation.sms_enabled | lower }}
      mail_address: "{{ sla_config.escalation.mail_address }}"
      sms_address: "{{ sla_config.escalation.sms_address }}"
      min_failure_count: {{ sla_config.escalation.min_failure_count }}
      triggers:
        every_change: {{ sla_config.escalation.triggers.every_change | lower }}
        to_red: {{ sla_config.escalation.triggers.to_red | lower }}
        to_yellow: {{ sla_config.escalation.triggers.to_yellow | lower }}
        to_green: {{ sla_config.escalation.triggers.to_green | lower }}
    schedule_defaults:
      period: "{{ sla_config.schedule_defaults.period }}"
      time: "{{ sla_config.schedule_defaults.time }}"
      days_of_week: {{ sla_config.schedule_defaults.days_of_week }}
{% endfor %}

# Variable Mappings
variable_mappings:
{% for var_name, var_config in variable_mappings.items() %}
  {{ var_name }}:
    default: "{{ var_config.default }}"
    environments:
{% for env_name, env_value in var_config.environments.items() %}
      {{ env_name }}: "{{ env_value }}"
{% endfor %}
{% endfor %}

# Schedule Templates
schedule_templates:
{% for template_name, template_config in schedule_templates.items() %}
  {{ template_name }}:
    period: "{{ template_config.period }}"
    time: "{{ template_config.time }}"
    cron_expression: "{{ template_config.cron_expression }}"
    days_of_week: {{ template_config.days_of_week }}
{% endfor %}

# ALPACA API Configuration
alpaca_api:
  host: "{{ inventory_hostname }}"
  protocol: "{{ ALPACA_Operator_API_Protocol }}"
  port: "{{ ALPACA_Operator_API_Port }}"
  username: "{{ ALPACA_Operator_API_Username }}"
  password: "{{ ALPACA_Operator_API_Password }}"
  tls_verify: "{{ ALPACA_Operator_API_Validate_Certs }}"

# Processing Options
processing_options:
  create_commands: false
  validate_data: true
  environment: "{{ processing_environment }}"
  log_level: "info"

# Generated: {{ ansible_date_time.iso8601 }}