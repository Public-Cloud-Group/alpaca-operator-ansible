# ALPACA Command Generator - Generated Documentation

**Generated on:** {{ ansible_date_time.iso8601 }}

## Overview

This directory contains automatically generated ALPACA command playbooks based on CSV data processing. The generation was performed using the Dynamic Command Generator role.

## Summary

- **Total CSV Rows Processed:** {{ csv_data | length }}
- **Total Commands Generated:** {{ expanded_command_data | length }}
- **Individual Command Files:** {{ individual_files_generated | default(0) }}
- **Consolidated Playbook:** {{ output_config.consolidated_file }}

## SLA Breakdown

| SLA Level | Systems | Commands |
|-----------|---------|----------|
| SLA1 | {{ csv_data | selectattr('system_sla', 'equalto', 'SLA1') | list | length }} | {{ expanded_command_data | selectattr('system_sla', 'equalto', 'SLA1') | list | length }} |
| SLA2 | {{ csv_data | selectattr('system_sla', 'equalto', 'SLA2') | list | length }} | {{ expanded_command_data | selectattr('system_sla', 'equalto', 'SLA2') | list | length }} |
| SLA3 | {{ csv_data | selectattr('system_sla', 'equalto', 'SLA3') | list | length }} | {{ expanded_command_data | selectattr('system_sla', 'equalto', 'SLA3') | list | length }} |
| SLA4 | {{ csv_data | selectattr('system_sla', 'equalto', 'SLA4') | list | length }} | {{ expanded_command_data | selectattr('system_sla', 'equalto', 'SLA4') | list | length }} |

## System Types Found

{% for system_type in csv_data | map(attribute='system_type') | unique | list %}
- {{ system_type }}
{% endfor %}

## Generated Files

### Individual Command Playbooks
{% for command_data in expanded_command_data %}
- `command_{{ command_data.system_name | replace(' ', '_') | lower }}_{{ command_data.system_type | lower }}.yml` - {{ command_data.command_name }} for {{ command_data.system_name }}
{% endfor %}

### Consolidated Files
- `{{ output_config.consolidated_file }}` - All commands in a single playbook
- `{{ output_config.inventory_file }}` - ALPACA API inventory
- `{{ output_config.variables_file }}` - Configuration variables
- `{{ output_config.readme_file }}` - This documentation file

## Usage

### Run Individual Command Playbooks

```bash
# Example: Run a specific command playbook
ansible-playbook -i {{ output_config.inventory_file }} command_mhp_hdb.yml
```

### Run Consolidated Playbook

```bash
# Run all commands at once
ansible-playbook -i {{ output_config.inventory_file }} {{ output_config.consolidated_file }}
```

### Run with Custom Variables

```bash
# Override API credentials if needed
ansible-playbook -i {{ output_config.inventory_file }} {{ output_config.consolidated_file }} \
  -e "ALPACA_Operator_API_Username=your_username" \
  -e "ALPACA_Operator_API_Password=your_password"
```

## Configuration

The generated playbooks use the following ALPACA API configuration:

- **Host:** {{ alpaca_api.host }}
- **Protocol:** {{ alpaca_api.protocol }}
- **Port:** {{ alpaca_api.port }}
- **Username:** {{ alpaca_api.username }}
- **TLS Verify:** {{ alpaca_api.tls_verify | lower }}

## CSV Data Mapping

The following CSV columns were mapped to ALPACA command parameters:

- `hdb_nw_sid` → `systemName`
- `system_vdns` → `agentName`
- `system_sla` → Command configuration selection
- `system_type` → Parameter substitution
- `system_az` → Parameter substitution

## SLA Command Configurations

### SLA1 (High Priority)
- **Commands:** {{ sla_commands.SLA1.commands | length }}
- **Schedule:** Every 5 minutes (log sync), Fixed time (data sync)
- **Escalation:** Email and SMS enabled
- **Critical:** Yes

### SLA2 (Medium Priority)
- **Commands:** {{ sla_commands.SLA2.commands | length }}
- **Schedule:** Every 15 minutes
- **Escalation:** Email only
- **Critical:** No

### SLA3 (Low Priority)
- **Commands:** {{ sla_commands.SLA3.commands | length }}
- **Schedule:** Every 30 minutes
- **Escalation:** Disabled
- **Critical:** No

### SLA4 (Development)
- **Commands:** {{ sla_commands.SLA4.commands | length }}
- **Schedule:** Manual execution
- **Escalation:** Disabled
- **Critical:** No

## Notes

- All generated playbooks are idempotent
- Commands will only be created if they don't already exist
- The system uses the ALPACA Operator collection (`pcg.alpaca_operator`)
- Parameter substitution is performed for system-specific values
- Each SLA level has different command configurations and schedules 