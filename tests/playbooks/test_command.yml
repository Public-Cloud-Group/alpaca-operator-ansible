- name: Test Alpaca Groups Module against Test Hosts
  hosts: test
  gather_facts: false

  tasks:
    - name: Ensure a specific system command exist
      pcg.alpaca_operator.alpaca_command:
        system:
          systemName: ansible01
        command:
          name: "BKP: DB log sync 3"
          state: present
          agentName: ansible_testing_agent_03
          parameters: "-p GLTarch -s <BKP_LOG_SRC> -l 4 -d <BKP_LOG_DEST1> -r <BKP_LOG_DEST2> -b <BKP_LOG_CLEANUP_INT> -t <BKP_LOG_CLEANUP_INT2> -h DB_HOST"
          processId: 801
          processCentralId: 8990048
          schedule:
            period: manually
            time: "12:12:12"
            cronExpression: ""
            daysOfWeek:
              - monday
              - sunday
              - wednesday
          parametersNeeded: false
          disabled: true
          critical: true
          history:
            documentAllRuns: false
            retention: 200
          autoDeploy: false
          timeout:
            type: default
            value: 30
          escalation:
            mailEnabled: true
            smsEnabled: true
            mailAddress: "monitoring_2@pcg.io"
            smsAddress: "0123456789-2"
            minFailureCount: 1
            triggers:
              everyChange: true
              toRed: false
              toYellow: false
              toGreen: true
        apiConnection:
          host: "{{ ALPACA_Operator_API_Host }}"
          protocol: "{{ ALPACA_Operator_API_Protocol }}"
          port: "{{ ALPACA_Operator_API_Port }}"
          username: "{{ ALPACA_Operator_API_Username }}"
          password: "{{ ALPACA_Operator_API_Password }}"
          tls_verify: "{{ ALPACA_Operator_API_Validate_Certs }}"